<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.mappers.adminMapper">
	
<!-- 	===== 현아 시작 ===== -->

	<insert id="adminInsert">
		insert into ADMIN
			(AD_NO
			, AD_ID 
			, AD_PW
			, AD_NAME
			, AD_DATE
<<<<<<< HEAD
			, AD_ACTIVE
			, AD_ROLE)
		values (CONCAT("AD", IFNULL((SELECT MAX(CAST(replace(AD_NO, "AD", "") AS unsigned))+1
									 FROM ADMIN A), 1))
			, #{AD_ID}
			, #{AD_PW}
			, #{AD_NAME}
			, DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s')
			, '1'
			, '0')
	</insert>
	
	<select id="getAdminList" resultType="map">
		select
			CAST(REPLACE(AD_NO, "AD", "") AS UNSIGNED) "AD_NO"
			, AD_ID 
			, CASE AD_ROLE WHEN '1' THEN '총괄'
						   WHEN '2' THEN '운영'
						   WHEN '3' THEN '시스템'
						   ELSE '기본'
			   END AS "AD_ROLE"
			, AD_ACTIVE
		from ADMIN
		ORDER BY AD_NO
	</select>
	
	<select id="idCheck" resultType="String">
		select
			AD_ID 
		from ADMIN
		where AD_ID = #{AD_ID}
	</select>
	
	<delete id="adminDelete">
		delete from ADMIN
		where AD_NO = #{AD_NO}
	</delete>
	
	<update id="adminUpdate">
		update ADMIN
		set AD_ACTIVE = #{AD_ACTIVE}
		where AD_NO = #{AD_NO}
	</update>
	
	<select id="getBoardList" resultType="map">
		select CODE
				, HIDE
				, SEQ
				, CASE CO_DETAIL WHEN '0' THEN '글'
						   WHEN '1' THEN '글+사진'
						   WHEN '2' THEN '글+사진+날짜'
						   ELSE '없음'
			   END AS "CO_DETAIL"
=======
			, AD_ACTIVE)
		values (CONCAT("AD", IFNULL((SELECT MAX(CAST(replace(AD_NO, "AD", "") AS unsigned))+1
									 FROM ADMIN A), 1))
			, #{AD_ID}
			, #{AD_PW}
			, #{AD_NAME}
			, DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s')
			, '1')
	</insert>
	
	<select id="getAdminList" resultType="map">
		select
			CAST(REPLACE(AD_NO, "AD", "") AS UNSIGNED) "AD_NO"
			, AD_ID 
			, AD_NAME
			, AD_ACTIVE
		from ADMIN
		ORDER BY AD_NO
	</select>
	
	<select id="idCheck" resultType="String">
		select
			AD_ID 
		from ADMIN
		where AD_ID = #{AD_ID}
	</select>
	
	<delete id="adminDelete">
		delete from ADMIN
		where AD_NO = #{AD_NO}
	</delete>
	
	<update id="adminUpdate">
		update ADMIN
		set AD_ACTIVE = #{AD_ACTIVE}
		where AD_NO = #{AD_NO}
	</update>
	
	<select id="getBoardList" resultType="map">
		select SEQ
				, CODE
				, HIDE
>>>>>>> branch 'jaewon' of https://github.com/hhyeonaa/c2d2309t1_2.git
		from CODE
			where  CO_TYPE = 'MM'
		ORDER BY SEQ
	</select>
	
	<update id="displayUpdate">
		update CODE
		set    HIDE = #{HIDE}
		      , SEQ = #{SEQ}
		where  CO_TYPE = #{CO_TYPE}
		and	   CODE = #{CODE}
	</update>
	
	<select id="getCategoryList" resultType="map">
		select CODE
				, HIDE
		from CODE
		where CO_TYPE = 'CA'
		ORDER BY SEQ
	</select>	
	
	
	
	
	
	
<!-- 	===== 현아 끝 ===== -->



<!-- 	===== 무창 시작 ===== -->

	

<!-- 	===== 무창 끝 ===== -->



<!-- 	===== 성엽 시작 ===== -->

	<select id="getMemberList" resultType="map">
		select MEM_NO
			 , MEM_ID
			 , MEM_NICK
			 , MEM_NAME
			 , MEM_EMAIL
			 , MEM_DATE
		from MEMBERS
		ORDER BY MEM_NO DESC
	</select>
	
	<select id="getContentboardList" resultType="map">
		select PRO_NO
			 , PRO_NAME
			 , PRO_WR
			 , date_format(str_to_date(PRO_DATE, '%Y%m%d%H%i%s'), '%Y%m%d %H:%i:%s')  AS PRO_DATE
		from PRODUCT
		where PRO_TC = 'MM1'
		ORDER BY PRO_NO DESC
	</select>
	
	<select id="getBoardCategoryList" parameterType="map" resultType="map">
		select PRO_NO
			 , PRO_NAME
			 , PRO_WR
			 , date_format(str_to_date(PRO_DATE, '%Y%m%d%H%i%s'), '%Y%m%d %H:%i:%s')  AS PRO_DATE
		from PRODUCT
		where 1 = 1
		<if test="category == 'MM1'">
		  AND PRO_TC = 'MM1'
		</if>
		<if test="category == 'MM2'">
		  AND PRO_TC = 'MM2'
		</if>
		<if test="category == 'MM3'">
		  AND PRO_TC = 'MM3'
		</if>
		<if test="category == 'MM4'">
		  AND PRO_TC = 'MM4'
		</if>
		ORDER BY PRO_NO DESC
	</select>
	
	<delete id="memberDelete">
		delete from MEMBERS
		where MEM_NO = #{MEM_NO}
	</delete>
	
	<delete id="contentDelete">
		delete from PRODUCT
		where PRO_NO = #{PRO_NO}
	</delete>

<!-- 	===== 성엽 끝 ===== -->
	
	

</mapper>