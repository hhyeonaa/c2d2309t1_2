<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.mappers.payMapper">
	
	
	<INSERT ID="insertAddress">
		INSERT INTO ADDRESS
			( ADD_NO
			, MEM_NO
			, ADD_POST
			, ADD_NAME
			, ADD_DETAIL
			, ADD_NICK
			, ADD_RECEIVER
			, ADD_PHONE)
		VALUES ( CONCAT("ADD", IFNULL((SELECT MAX(CAST(REPLACE(ADD_NO,"ADD", "") AS UNSIGNED))+1) FROM ADDRESS A), 1))	 
			, #{MEM_NO}
			, #{ADD_POST}
			, #{ADD_NAME}
			, #{ADD_DETAIL}
			, #{ADD_NICK}
			, #{ADD_RECEIVER}
			, #{ADD_PHONE})
	</INSERT>

	<INSERT ID="insertAddress">
		INSERT INTO ADDRESS
		    ( ADD_NO
		    , MEM_NO
		    , ADD_POST
		    , ADD_NAME
		    , ADD_DETAIL
		    , ADD_NICK
		    , ADD_RECEIVER
		    , ADD_PHONE)
		VALUES (CONCAT('ADD', IFNULL((SELECT MAX(CAST(REPLACE(ADD_NO, 'ADD', '') AS UNSIGNED))
                    					FROM ADDRESS 
                    					WHERE MEM_NO = #{MEM_NO}), 0) + 1),
     #{MEM_NO},
     #{ADD_POST},
     #{ADD_NAME},
     #{ADD_DETAIL},
     #{ADD_NICK},
     #{ADD_RECEIVER},
     #{ADD_PHONE});
	</INSERT>
	
</mapper>